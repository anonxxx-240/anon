<!-- README.md -->

# Inventory & Queuing Simulation Package

This repository contains code for dual-sourcing inventory-control and queuing-system simulations,  
as well as the BASA implementation in MATLAB, and analysis scripts for Table 3 and Figure 1.

## 1. Environment Setup

1. **Python version**  
   - Requires **Python 3.10**.

2. **Create a virtual environment & install dependencies**  
   ```bash
   python3 -m venv .venv
   source .venv/bin/activate          # Linux / macOS
   # .venv\Scripts\activate         # Windows PowerShell

   pip install --upgrade pip
   pip install -r requirements.txt
   ```

## 2. Repository Structure

```
.
├── requirements.txt
├── hyperparameter_setting.md     # Hyperparameter configurations
├── scripts/
│   └── analysis.ipynb            # Scripts to generate Table 3 & Figure 1
├── source_code/
│   ├── ordered_policy/
│   │   ├── main.py               # Dual-sourcing simulation entrypoint
│   │   └── results/              # Output directory (see Running Simulations)
│   ├── ordered_policy_queuing/
│   │   ├── main.py               # Queuing simulation entrypoint
│   │   └── results/              # Output directory (see Running Simulations)
│   └── BASA/
│       └── main_.m               # BASA MATLAB code
└── README.md
```

## 3. Data

All simulation data are generated on the fly from a collection of predefined distributions. There is no external data dependency—every experiment is self-contained.

## 4. Running Simulations

All simulation outputs go under each module’s `results/` folder. You only need to supply a **results file name**; the code will create a subfolder for you.

### 3.1 Dual-Sourcing Inventory Control

```bash
# Usage:
#   python3 source_code/ordered_policy/main.py <results_file_name>
#
# Outputs are saved to:
#   source_code/ordered_policy/results/<results_file_name>/
python3 source_code/ordered_policy/main.py experiment_01
```

### 3.2 Queuing System

```bash
# Usage:
#   python3 source_code/ordered_policy_queuing/main.py <results_file_name>
#
# Outputs are saved to:
#   source_code/ordered_policy_queuing/results/<results_file_name>/
python3 source_code/ordered_policy_queuing/main.py queue_experiment_A
```

### 3.3 BASA (MATLAB)

```matlab
% From MATLAB command prompt:
run('source_code/BASA/main_.m');
```

## 4. Analysis Scripts for Table 3 & Figure 1

The `scripts/analysis.ipynb` notebook contains all code to generate Table 3 and Figure 1. It is not integrated with the simulation code, so you must manually load each results file into the notebook.

### 4.1 Loading Simulation Results

- **Results file format:** each file is a Python `dict` with structure:
  ```python
  {
    'algo_name': {
      T: [ [cumulated_cost, evaluated_cost], ... ]
    }
  }
  ```
- For **random policy**, evaluation uses the **first** component (cumulated_cost at index 0).
- For **other policies**, evaluation uses the **second** component (evaluated_cost at index 1).

Inside `analysis.ipynb`, replace the placeholder data-loading cells with code that reads your `results/<results_file_name>.pkl` files and extracts values according to the above rules.

### 4.2 Loading BASA Results

BASA results must be generated by running the author’s MATLAB code independently. After execution, the output CSV file with a header is saved at:

```
source_code/BASA/results_with_header.csv
```

This CSV contains one entry per trial, each representing the policy evaluated cost. In `analysis.ipynb`, add a cell to:

1. Read `results_with_header.csv` (e.g., using `pandas.read_csv`).
2. Extract the evaluated costs.
3. Merge these BASA costs with the costs from other models for comparative analysis.

Ensure that the merged DataFrame aligns trials and policies correctly before generating Table 3 and Figure 1.

## 5. Hyperparameter Settings

See **hyperparameter_setting.md** in the root directory for all configuration details.

## 6. License

This project is released under the MIT License. See [LICENSE](./LICENSE) for details.
